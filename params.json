{"name":"cs_auth","body":"This project is contributed by [www.cloudops.com](www.cloudops.com)\r\n\r\n##SETUP\r\n\r\nIn file: ```/etc/swift/proxy-server.conf```\r\n\r\nAdd 'cs_auth' (and 'cache') to your pipeline:\r\n\r\n```\r\n    [pipeline:main]\r\n    pipeline = catch_errors cache cs_auth proxy-server\r\n```\r\n\r\nOptional S3 Integration - To add support for s3 calls, change the above to:\r\n\r\n```\r\n    [pipeline:main]\r\n    pipeline = catch_errors cache swift3 cs_auth proxy-server\r\n    \r\n    [filter:swift3]\r\n    use = egg:swift#swift3\r\n```\r\n\r\nAdd account auto creation to the proxy-server.\r\n\r\n```\r\n    [app:proxy-server]\r\n    account_autocreate = true\r\n```\r\n\r\nAdd a filter for 'cs_auth':\r\n\r\n```\r\n    [filter:cs_auth]\r\n    use = egg:cs_auth#cs_auth\r\n    cs_api_url = http://127.0.0.1:8081/client/api\r\n    cs_admin_apikey = <admin user's apikey>\r\n    cs_admin_secretkey = <admin user's secretkey>\r\n    swift_storage_url = http://127.0.0.1:8080\r\n```\r\n<br /><br />\r\n\r\n\r\n##USAGE\r\n\r\n\r\n###Curl\r\n\r\nRequest for authentication\r\n\r\n```\r\ncurl -v -H \"X-Auth-User: $cloudstack_username\" -H \"X-Auth-Key: $cloudstack_apikey\" http://127.0.0.1:8080/v1.0\r\n```\r\n\r\nreturns: $cloudstack_auth_token and $cloudstack_swift_storage_url\r\n\r\nRequest container list\r\n\r\n```\r\ncurl -v -X GET -H \"X-Auth-Token: $cloudstack_auth_token\" $cloudstack_swift_storage_url\r\n```\r\n<br />\r\n\r\n\r\n###Swift CLI\r\n\r\nRequest status\r\n\r\n```\r\nswift -v -A http://127.0.0.1:8080/v1.0 -U $cloudstack_username -K $cloudstack_apikey stat\r\n```\r\n<br />\r\n\r\n\r\n###S3 API\r\n\r\nRequires the optional step in SETUP  \r\n(example uses the python boto lib)\r\n\r\n```\r\nfrom boto.s3.connection import S3Connection, OrdinaryCallingFormat\r\n\r\nconn = S3Connection(aws_access_key_id=cloudstack_apikey,\r\n                    aws_secret_access_key=cloudstack_secretkey,\r\n                    host='127.0.0.1',\r\n                    port=8080,\r\n                    is_secure=False,\r\n                    calling_format=OrdinaryCallingFormat())\r\nbucket = conn.create_bucket('sample_bucket')\r\n```","tagline":"Swift Auth Middleware backed by the Cloudstack API.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}